(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{445:function(s,n,e){"use strict";e.r(n);var a=e(57),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"前言"}},[s._v("前言")]),s._v(" "),e("p",[s._v("在与同事协作开发的过程中，见识到了不少“骚操作”。因为之前都没用过，所以我愿称之为“高级技巧”！")]),s._v(" "),e("h2",{attrs:{id:"vue-extend"}},[s._v("Vue.extend")]),s._v(" "),e("p",[s._v("在交互过程中，有个需求就是点击图标弹出相关信息的弹窗，并且能够同时打开多个。这时就可以用Vue.extend方法手动挂载弹窗组件。")]),s._v(" "),e("p",[s._v("举例：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 目录结构\n/registry\n    /videoDialog\n        videoDialog.vue\n        index.js\n    /XXXDialog\n        ···\n    index.js\n    \n\n// videoDialog/index.js\nimport Vue from 'vue';\nimport videoDialog from './videoDialog.vue';\n\nconst videoDialogConstructor = Vue.extend(videoDialog);\n\nfunction videoDialogInstance (data) {\n    const dialogInstance = new videoDialogConstructor({\n        el: document.createElement('div'),\n        data () ({\n            ...data\n        })\n    });\n    document.body.appendChild(dialogInstance.$el);\n}\n\nexport default function videoDialogDom () {\n    Vue.prototype.$videoDom = videoDialogInstance\n}\n\n/index.js\nimport videoDialog from './videoDialog';\nVue.use(videoDialog);\n\n// 用法\n// video.vue\nexport default {\n    method: {\n        click() {\n            this.$video();\n        }\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br")])]),e("h2",{attrs:{id:"在css中使用相对路径"}},[s._v("在css中使用相对路径")]),s._v(" "),e("p",[s._v("在vue项目中，通过在webpack配置文件中配置alias属性增加文件路径的别名")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// webpack.config.js\nresolve: {\n    alias: {\n        '@': resolve('src'),\n        '@assets': resolve('src/assets')\n    }\n}\n\n// 在js文件中可以使用\nimport component from '@/component/xxx'\n\n// 但是在css文件中使用'@assets/images/xxx.png'却会报错\nbackground-image: url(@assets/images/xxx.png)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("在css文件使用"),e("code",[s._v("@assets/images/xxx.png")]),s._v("的语法引用相对"),e("code",[s._v("@assets")]),s._v("的目录会报错。说明"),e("code",[s._v("webpack")]),s._v("没有正确识别资源的相对路径。")]),s._v(" "),e("p",[s._v("这是因为css文件是被"),e("code",[s._v("css-loader")]),s._v("所处理，"),e("code",[s._v("url()")]),s._v("中的路径会被"),e("code",[s._v("css-loader")]),s._v("视为绝对路径。因为并没有在"),e("code",[s._v("css-loader")]),s._v("中配置"),e("code",[s._v("alias")]),s._v("属性，所以会找不到"),e("code",[s._v("@assets")]),s._v("。")]),s._v(" "),e("p",[s._v("解决方法有两种：")]),s._v(" "),e("ul",[e("li",[s._v("在"),e("code",[s._v("css-loader")]),s._v("中配置"),e("code",[s._v("alias")]),s._v("，但是相同的别名却要配置两份，会显得冗余。")]),s._v(" "),e("li",[s._v("在引用路径之前添加～符号。"),e("code",[s._v("background-image: url(～@assets/images/xxx.png)")]),s._v("；webpack会将以～符号作为前缀的路径视作依赖模块去解析，这样alias配置就生效了。")])]),s._v(" "),e("p",[s._v("同样的方法也可以用于非JS文件中。")]),s._v(" "),e("h2",{attrs:{id:"自动加载模块"}},[s._v("自动加载模块")]),s._v(" "),e("p",[s._v("有些库会在项目里频繁用到，比如说lodash。而每次使用都得引用一次"),e("code",[s._v("import _ from 'lodash'")]),s._v("麻烦的很！")]),s._v(" "),e("p",[s._v("有一个方法可以自动加载模块：使用"),e("code",[s._v("ProvidePlugin")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("new webpack.ProvidePlugin({\n  _: 'lodash',\n  // ...\n})\n\n// 或者只使用单个方法\nnew webpack.ProvidePlugin({\n  _map: ['lodash', 'map']\n  // ...\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("任何时候，当"),e("code",[s._v("_")]),s._v("被当作未赋值的变量时，"),e("code",[s._v("lodash")]),s._v("就会自动被加载，并且"),e("code",[s._v("_")]),s._v("会被这个 "),e("code",[s._v("lodash")]),s._v("输出的内容所赋值。")]),s._v(" "),e("p",[s._v("指定vue的时候要注意, 对于ES2015模块的"),e("code",[s._v("default export")]),s._v("，必须指定模块的"),e("code",[s._v("default")]),s._v("属性。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("new webpack.ProvidePlugin({\n  Vue: ['vue/dist/vue.esm.js', 'default']\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"公共组件、公共方法与公共指令的注入"}},[s._v("公共组件、公共方法与公共指令的注入")]),s._v(" "),e("p",[s._v("在项目的开发中，一般都把重复使用的组件、方法抽象出来放到例如叫common的文件夹中。例如")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/common\n    /components\n        index.js\n    /utils\n        index.js\n    /directives\n        index.js\n    index.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("在前面这三个"),e("code",[s._v("index.js")]),s._v("文件中，一般是"),e("code",[s._v("export")]),s._v("出各个类型的函数，例如：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// components/index,js\nexport { component1 } from './component1.vue'\nexport { component2 } from './component2.vue'\n\n// utils/index.js\nexport { method1 } from './method1.js'\nexport { method2 } from './method2.js'\n\n// directives/index.js\nexport { directive1 } from './directive1.js'\nexport { directive2 } from './directive2.js'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("然后统一在第四个index.js中，暴露一个"),e("code",[s._v("install")]),s._v("方法，在install里注入到全局")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import * as Directives from './directives';\nimport * as Components from './components';\nimport * as Utils from './utils';\n\nexport default {\n    install: (Vue) => {\n        for (let name of Object.keys(Components)) {\n            Vue.component(Components[name]['name'], Components[name]);\n        }\n        for (let name in Directives) {\n            Vue.directive(name, Directives[name]);\n        }\n        Object.assign(Vue.prototype.$utils ? Vue.prototype.$utils : {}, Utils);\n    }\n};\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("只需在"),e("code",[s._v("main.js")]),s._v("文件中，使用"),e("code",[s._v("vue.use")]),s._v("方法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// main.js\nimport common from './common';\nVue.use(common);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("干净利落！")]),s._v(" "),e("h2",{attrs:{id:"gzip加速"}},[s._v("Gzip加速")]),s._v(" "),e("p",[s._v("最后介绍一个插件：CompressionWebpackPlugin。它可以提供gzip压缩, 优化http请求, 提高加载速度。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// vue.config.js\nconst CompressionPlugin = require(\"compression-webpack-plugin\"); \nconfigureWebpack:config => {\n    if (process.env.NODE_ENV === 'production') {\n         // 开启gzip压缩\n        config.plugins.push(new CompressionPlugin({\n            algorithm: 'gzip',\n            test: /\\.js$|\\.css$/,\n            threshold: 10240, // 对超过10k的数据进行压缩\n            cache: true, // 是否需要缓存\n            deleteOriginalAssets:false  // 不删除源文件\n        }))\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);